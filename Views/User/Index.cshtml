
@{
    Layout = "~/Views/Shared/Profile.cshtml";
}
@using Shopping_And_Bidding.Models
@model List<Post>
<body onload="f2()">
    <header>
        <div class="row" style="margin-top:35px">
            <div class="col-md-4" style="margin-left:auto">
                <a href="/Home">
                    <img src="~/Images/Bidding-for-Good-Logo[1].jpg"
                         style="border-radius:20px;border:solid"
                         width="200px" height="170px" />
                </a>
            </div>
            <div class="col-md-8">
                <div class="wrapper" style="margin-top:10px">
                    <div class="bannerad">
                        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                        <ins class="adsbygoogle"
                             style="display:inline-block;width:728px;height:100px"
                             data-ad-client="ca-pub-4560135486422930"
                             data-ad-slot="8876535802"></ins>
                        <script>
                            (adsbygoogle = window.adsbygoogle || []).push({});
                        </script>
                    </div>
                </div>
            </div>
        </div>
        <div class="row" style="margin:auto">
            <div class="nav navbar col-lg-12 col-lg-offset-0" style="border-radius:10px;border:solid;border-width:1px;background-color:royalblue">
                <ul class="nav navbar-nav glyphicon-triangle-bottom">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" style="margin-left:30px;color:whitesmoke" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Auctions <span class="caret"></span></a>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                            <li><a href="/User/MobilePost">Mobile</a></li>
                            <li><a href="/User/LaptopPost">Laptops & Tablets</a></li>
                            <li><a href="/User/ElectronicsPost">Electronics</a></li>
                            <li><a href="/User/FashionPost">Fashion</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" style="color:whitesmoke">Products <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="/User/MobileProduct">Mobile</a></li>
                            <li><a href="/User/LaptopProduct">Laptops & Tablets</a></li>
                            <li><a href="/User/ElectronicsProduct">Electronics</a></li>
                            <li><a href="/User/FashionProduct">Fashion</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="/Home/BidForGood" style="color:whitesmoke">Help </a>
                    </li>
                </ul>
                <div class="nav navbar-right" style="margin-right:5px;margin-top:2px">
                    <input type="search" id="searchBar" style="border-radius:15px;margin-right:12px" class="glyphicon-search" placeholder="              Search" required />
                    <div class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" style="color:whitesmoke">Search by<span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="#" class="searchOption" id="category" data-value="category">Category</a></li>
                            <li><a href="#" class="searchOption" id="price" data-value="price">Price</a></li>
                            <li><a href="#" class="searchOption" id="title" data-value="title">Title</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <script src="~/Scripts/jquery-1.10.2.min.js"></script>
        <script src="~/Scripts/jquery-1.10.2.intellisense.js"></script>
        <script>
            $(document).ready(function () {
                $("#category,#price,#title").click(function () {
                    var value = $(this).data('value');
                    var data = $("#searchBar").val();
                    try{
                        if(value=="price")
                            parseInt(data);
                        if (data != "") {
                            $.ajax({
                                type: "post",
                                url: "/User/Search?searchBy=" + value + "&search=" + data + "",

                                success: function (view) {
                                    $("#searchBar").val("");
                                    $("#posts").children().remove();
                                    $("#posts").append("" + view + "");
                                },
                                error: function (data) {

                                }
                            });
                        }
                    } catch (err) {

                    }
                });
            });
        </script>
        <div id="myCarousel" class="carousel slide" data-ride="carousel">
            <!-- Indicators -->
            <ol class="carousel-indicators">
                <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                <li data-target="#myCarousel" data-slide-to="1"></li>
                <li data-target="#myCarousel" data-slide-to="2"></li>
                <li data-target="#myCarousel" data-slide-to="3"></li>
            </ol>

            <!-- Wrapper for slides -->
            <div class="carousel-inner" role="listbox">
                <div class="item active">
                    <img src="~/Images/newPhone.jpg" alt="Phones">
                </div>

                <div class="item">
                    <img src="~/Images/suit.jpg" alt="Suit">
                </div>

                <div class="item">
                    <img src="~/Images/laptops.jpg" alt="Laptops">
                </div>

                <div class="item">
                    <img src="~/Images/electronics.png" alt="Electronics">
                </div>
                <div class="item">
                    <img src=" ~/Images/Tab.jpg" alt="Tabs">
                </div>
            </div>

            <!-- Left and right controls -->
            <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
                <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
                <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </header>
    <section>
        @*Modal For Adding Bid*@
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h3 class="modal-title" style="font:bold;font-family:'Times New Roman'">Bid Information</h3>
                    </div>
                    <div class="modal-body">
                        @*@using (Ajax.BeginForm("BidSave", "Bid", new AjaxOptions
                            { HttpMethod = "POST", UpdateTargetId = "pricediv_", InsertionMode = InsertionMode.Replace }))
                            {*@
                        <label>Amount</label><input type="text" required class="form-control" name="Amount" id="Amount" placeholder="Price" />
                        <input type="hidden" name="user_id" class="form-control" value="@(((user)Session["user"]).Uid)" id="user_id" />
                        <input type="hidden" name="post_id" class="form-control" value="" id="post_id" />
                        <br /><button type="submit" style="background-color:darkorange;color:whitesmoke" class="btn btn-default" id="updateBid">Update</button>
                    </div>
                </div>
            </div>
        </div>
        <h3 style="color:darkorange">Live Auctions</h3>
        @if (Model.Count() == 0)
        {
            <div class="row">
                <div class="col-md-12"><h3 style="margin-left:35%;font:bolder">No Results Found</h3></div>
            </div>
        }
        else
        {
            <br /><br />
            <div class="row" id="posts" style="margin:auto">

                @foreach (Post p in Model)
                {
                    <div onload="f2()" id="post_data" class="col-md-3" style="margin:auto;border:dotted;border-radius:10px;border-width:1px">
                        <h4 style="color:crimson;margin-left:30%">@p.Title</h4>
                        <a class="fancybox" rel="group" href="~/Images/@p._Image">
                            <img style="margin-left:10%" src="~/Images/@p._Image" width="200px" height="200px" />
                        </a><br />
                        <h2 id="showtime" class="counter" style="color:red;margin-left:20%"></h2>
                        <div id="pricediv_@p.PtId">
                            <h3 id="price_@(p.PtId)" style="color:green;margin-left:27%">Rs.@p.Price</h3>
                        </div>
                        @if ((user)Session["user"] != null)
                        {
                            <button type="button" style="background-color:darkorange;color:whitesmoke;margin-left:30%" class="addpost btn btn-default panel-footer" data-toggle="modal" data-id="@p.PtId" data-target="#myModal"> BidNow </button>
                        }
                        else if ((user)Session["user"] == null)
                        {
                            <a href="/Login/Login"><input type="button" value="BidNow" style="background-color:darkorange;color:white;margin-left:30%" class="btn btn-default" /></a>
                        }
                    </div>
                }
            </div>
        }
        <script>
            $('#updateBid').on('click', function () {
                if ($('#price_' + $(".modal-body #post_id").val()).text() > $('#Amount').val()) {
                    $('#price_' + $(".modal-body #post_id").val()).text($('#Amount').val());
                    $.load('/Bid/BidSave?amount=' + $('#Amount').val() + '&user_id=' +@(((user)Session["user"]).Uid) +'&post_id=' + $(this).data('id'));
                }
            });

            $(document).on("click", ".addpost", function () {
                var ptId = $(this).data('id');
                $(".modal-body #post_id").val(ptId);
            });

            $(document).ready(function () {
                $(".fancybox").fancybox()
            });
        </script>
    </section>
</body>